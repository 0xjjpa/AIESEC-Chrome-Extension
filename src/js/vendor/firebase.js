(function() {function g(a){throw a;}var h=void 0,k=!0,l=null,n=!1;function aa(a){return function(){return this[a]}}function o(a){return function(){return a}}var p,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return a!==h}function ea(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function ga(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}Math.floor(2147483648*Math.random()).toString(36);function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return x.apply(l,arguments)}function ja(a,b){function c(){}c.prototype=b.prototype;a.Hd=b.prototype;a.prototype=new c};function ka(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))}function la(){this.Qb=h}
function ma(a,b,c){switch(typeof b){case "string":na(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==l){c.push("null");break}if("array"==da(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],ma(a,a.Qb?a.Qb.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),
na(f,c),c.push(":"),ma(a,a.Qb?a.Qb.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var oa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},pa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function na(a,b){b.push('"',a.replace(pa,function(a){if(a in oa)return oa[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return oa[a]=e+b.toString(16)}),'"')};function qa(a){return"undefined"!==typeof JSON&&u(JSON.parse)?JSON.parse(a):ka(a)}function y(a){if("undefined"!==typeof JSON&&u(JSON.stringify))a=JSON.stringify(a);else{var b=[];ma(new la,a,b);a=b.join("")}return a};function ra(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};function z(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);e&&g(Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+"."))}
function A(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:sa.assert(n,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}a+=" failed: ";c&&(a+="If provided, ");return a+(d+" argument ")}function C(a,b,c,d){(!d||u(c))&&"function"!=da(c)&&g(Error(A(a,b,d)+"must be a valid function."))};var ta={},sa={},ua=/[\[\].#$\/]/,va=/[\[\].#$]/;function wa(a){return v(a)&&0!==a.length&&!ua.test(a)}function xa(a,b,c){(!c||u(b))&&ya(A(a,1,c),b)}
function ya(a,b,c){c||(c=0);u(b)||g(Error(a+"contains undefined."));"function"==da(b)&&g(Error(a+"contains a function."));fa(b)&&(b!=b||b==Number.POSITIVE_INFINITY||b==Number.NEGATIVE_INFINITY)&&g(Error(a+"contains "+b.toString()));1E3<c&&g(new TypeError(a+"contains a cyclic object value."));v(b)&&(b.length>10485760/3&&10485760<ta.Id.Gd(b).length)&&g(Error(a+"contains a string greater than 10485760 utf8 bytes ('"+b.substring(0,50)+"...')"));if(ga(b))for(var d in b)b.hasOwnProperty(d)&&(".priority"!==
d&&(".value"!==d&&!wa(d))&&g(Error(a+"contains an invalid key ("+d+').  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),ya(a,b[d],c+1))}function za(a,b,c,d){(!d||u(c))&&(c!==l&&!fa(c)&&!v(c))&&g(Error(A(a,b,d)+"must be a valid firebase priority (null or a string.)"))}
function Aa(a,b,c){if(!c||u(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:g(Error(A(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}function Ba(a,b){u(b)&&!wa(b)&&g(Error(A(a,2,k)+'must be a valid firebase key (non-empty string, not containing ".", "#", "$", "/", "[", or "]").'))}
function Ca(a,b){(!v(b)||0===b.length||va.test(b))&&g(Error(A(a,1,n)+'must be a non-empty string and can\'t contain ".", "#", "$", "[", or "]".'))}function Da(a,b){".info"===D(b)&&g(Error(a+" failed: Can't modify data under /.info/"))};function E(a,b,c,d,e,f,i){this.n=a;this.path=b;this.na=c;this.va=Ea.test(d)?Number(d):d;this.Ka=e;this.za=Ea.test(f)?Number(f):f;this.ya=i;u(this.va)&&(u(this.za)&&u(this.na))&&g("fb.api.Query: Can't combine startAt(), endAt(), and limit().")}E.prototype.ec=function(a,b){z("fb.api.Query.on",2,2,arguments.length);Aa("fb.api.Query.on",a,n);C("fb.api.Query.on",2,b,n);this.n.xb(this,a,b);return b};E.prototype.on=E.prototype.ec;
E.prototype.dc=function(a,b){z("fb.api.Query.off",0,2,arguments.length);Aa("fb.api.Query.off",a,k);C("fb.api.Query.off",2,b,k);this.n.ob(this,a,b)};E.prototype.off=E.prototype.dc;E.prototype.qd=function(a,b){function c(f){e&&(e=n,d.dc(a,c),b(f))}z("fb.api.Query.once",2,2,arguments.length);Aa("fb.api.Query.once",a,n);C("fb.api.Query.once",2,b,n);var d=this,e=k;this.ec(a,c)};E.prototype.once=E.prototype.qd;
E.prototype.hd=function(a){z("fb.api.Query.limit",1,1,arguments.length);(!fa(a)||Math.floor(a)!==a||0>=a)&&g("fb.api.Query.limit: First argument must be a positive integer.");return new E(this.n,this.path,a,this.va,this.Ka,this.za,this.ya)};E.prototype.limit=E.prototype.hd;E.prototype.zd=function(a,b){z("fb.api.Query.startAt",0,2,arguments.length);za("fb.api.Query.startAt",1,a,k);Ba("fb.api.Query.startAt",b);u(a)||(b=a=l);return new E(this.n,this.path,this.na,a,b,this.za,this.ya)};
E.prototype.startAt=E.prototype.zd;E.prototype.ad=function(a,b){z("fb.api.Query.endAt",0,2,arguments.length);za("fb.api.Query.endAt",1,a,k);Ba("fb.api.Query.endAt",b);return new E(this.n,this.path,this.na,this.va,this.Ka,a,b)};E.prototype.endAt=E.prototype.ad;function Ga(a){var b={};u(a.va)&&(b.sp=a.va);u(a.Ka)&&(b.sn=a.Ka);u(a.za)&&(b.ep=a.za);u(a.ya)&&(b.en=a.ya);u(a.na)&&(b.l=a.na);return b}E.prototype.Da=function(){var a=Ha(Ga(this));return"{}"===a?"default":a};function F(a){if(a instanceof F)return a;if(1==arguments.length){this.m=a.split("/");for(var b=0,c=0;c<this.m.length;c++)0<this.m[c].length&&(this.m[b]=this.m[c],b++);this.m.length=b;this.R=0}else this.m=arguments[0],this.R=arguments[1]}function D(a){return a.R>=a.m.length?l:a.m[a.R]}function Ia(a){var b=a.R;b<a.m.length&&b++;return new F(a.m,b)}F.prototype.toString=function(){for(var a="",b=this.R;b<this.m.length;b++)""!==this.m[b]&&(a+="/"+this.m[b]);return a||"/"};
F.prototype.parent=function(){if(this.R>=this.m.length)return l;for(var a=[],b=this.R;b<this.m.length-1;b++)a.push(this.m[b]);return new F(a,0)};F.prototype.H=function(a){for(var b=[],c=this.R;c<this.m.length;c++)b.push(this.m[c]);if(a instanceof F)for(c=a.R;c<a.m.length;c++)b.push(a.m[c]);else{a=a.split("/");for(c=0;c<a.length;c++)0<a[c].length&&b.push(a[c])}return new F(b,0)};F.prototype.e=function(){return this.R>=this.m.length};
function Ja(a,b){var c=D(a);if(c===l)return b;if(c===D(b))return Ja(Ia(a),Ia(b));g("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")")};function Ka(){this.children={};this.yb=0;this.value=l}function La(a,b,c){this.Cb=a?a:"";this.kb=b?b:l;this.k=c?c:new Ka}function G(a,b){for(var c=b instanceof F?b:new F(b),d=a,e;(e=D(c))!==l;)d=new La(e,d,e in d.k.children?d.k.children[e]:new Ka),c=Ia(c);return d}p=La.prototype;p.j=function(){return this.k.value};function H(a,b){J("undefined"!==typeof b);a.k.value=b;Ma(a)}p.clear=function(){this.k.value=l;this.k.children={};this.k.yb=0;Ma(this)};p.Bb=function(){return 0<this.k.yb};
p.e=function(){return this.j()===l&&!this.Bb()};p.F=function(a){for(var b in this.k.children)a(new La(b,this,this.k.children[b]))};function Na(a,b,c,d){c&&!d&&b(a);a.F(function(a){Na(a,b,k,d)});c&&d&&b(a)}function Oa(a,b){for(var c=a.parent();c!==l;){if(b(c))return k;c=c.parent()}return n}p.path=function(){return new F(this.kb===l?this.Cb:this.kb.path()+"/"+this.Cb)};p.name=aa("Cb");p.parent=aa("kb");
function Ma(a){if(a.kb!==l){var b=a.kb,c=a.Cb,d=a.e(),e=c in b.k.children;d&&e?(delete b.k.children[c],b.k.yb--,Ma(b)):!d&&!e&&(b.k.children[c]=a.k,b.k.yb++,Ma(b))}};function K(a,b){this.Ma=a?a:Pa;this.Y=b?b:Qa}function Pa(a,b){return a<b?-1:a>b?1:0}p=K.prototype;p.ca=function(a,b){return new K(this.Ma,this.Y.ca(a,b,this.Ma).copy(l,l,n,l,l))};p.remove=function(a){return new K(this.Ma,this.Y.remove(a,this.Ma).copy(l,l,n,l,l))};p.get=function(a){for(var b,c=this.Y;!c.e();){b=this.Ma(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return l};
function Ra(a,b){for(var c,d=a.Y,e=l;!d.e();){c=a.Ma(b,d.key);if(0===c){if(d.left.e())return e?e.key:l;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}g("Attempted to find predecessor key for a nonexistent key.  What gives?")}p.e=function(){return this.Y.e()};p.count=function(){return this.Y.count()};p.hb=function(){return this.Y.hb()};p.Sa=function(){return this.Y.Sa()};p.ma=function(a){return this.Y.ma(a)};p.Fa=function(a){return this.Y.Fa(a)};
p.Pa=function(a){return new Sa(this.Y,a)};function Sa(a,b){this.Lc=b;for(this.Db=[];!a.e();)this.Db.push(a),a=a.left}function Ta(a){if(0===a.Db.length)return l;var b=a.Db.pop(),c;c=a.Lc?a.Lc(b.key,b.value):{key:b.key,value:b.value};for(b=b.right;!b.e();)a.Db.push(b),b=b.left;return c}function Ua(a,b,c,d,e){this.key=a;this.value=b;this.color=c!=l?c:k;this.left=d!=l?d:Qa;this.right=e!=l?e:Qa}p=Ua.prototype;
p.copy=function(a,b,c,d,e){return new Ua(a!=l?a:this.key,b!=l?b:this.value,c!=l?c:this.color,d!=l?d:this.left,e!=l?e:this.right)};p.count=function(){return this.left.count()+1+this.right.count()};p.e=o(n);p.ma=function(a){return this.left.ma(a)||a(this.key,this.value)||this.right.ma(a)};p.Fa=function(a){return this.right.Fa(a)||a(this.key,this.value)||this.left.Fa(a)};function Va(a){return a.left.e()?a:Va(a.left)}p.hb=function(){return Va(this).key};
p.Sa=function(){return this.right.e()?this.key:this.right.Sa()};p.ca=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.copy(l,l,l,e.left.ca(a,b,c),l):0===d?e.copy(l,b,l,l,l):e.copy(l,l,l,l,e.right.ca(a,b,c));return Wa(e)};function Xa(a){if(a.left.e())return Qa;!a.left.C()&&!a.left.left.C()&&(a=Ya(a));a=a.copy(l,l,l,Xa(a.left),l);return Wa(a)}
p.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))!c.left.e()&&(!c.left.C()&&!c.left.left.C())&&(c=Ya(c)),c=c.copy(l,l,l,c.left.remove(a,b),l);else{c.left.C()&&(c=Za(c));!c.right.e()&&(!c.right.C()&&!c.right.left.C())&&(c=$a(c),c.left.left.C()&&(c=Za(c),c=$a(c)));if(0===b(a,c.key)){if(c.right.e())return Qa;d=Va(c.right);c=c.copy(d.key,d.value,l,l,Xa(c.right))}c=c.copy(l,l,l,l,c.right.remove(a,b))}return Wa(c)};p.C=aa("color");
function Wa(a){a.right.C()&&!a.left.C()&&(a=ab(a));a.left.C()&&a.left.left.C()&&(a=Za(a));a.left.C()&&a.right.C()&&(a=$a(a));return a}function Ya(a){a=$a(a);a.right.left.C()&&(a=a.copy(l,l,l,l,Za(a.right)),a=ab(a),a=$a(a));return a}function ab(a){var b;b=a.copy(l,l,k,l,a.right.left);return a.right.copy(l,l,a.color,b,l)}function Za(a){var b;b=a.copy(l,l,k,a.left.right,l);return a.left.copy(l,l,a.color,l,b)}
function $a(a){var b,c;b=a.left.copy(l,l,!a.left.color,l,l);c=a.right.copy(l,l,!a.right.color,l,l);return a.copy(l,l,!a.color,b,c)}function bb(){}p=bb.prototype;p.copy=function(){return this};p.ca=function(a,b){return new Ua(a,b,h,h,h)};p.remove=function(){return this};p.get=o(l);p.count=o(0);p.e=o(k);p.ma=o(n);p.Fa=o(n);p.hb=o(l);p.Sa=o(l);p.C=o(n);var Qa=new bb;function cb(){};function db(){this.u=[];this.Yb=[];this.Vc=[];this.Jb=[];this.Jb[0]=128;for(var a=1;64>a;++a)this.Jb[a]=0;this.reset()}ja(db,cb);db.prototype.reset=function(){this.u[0]=1732584193;this.u[1]=4023233417;this.u[2]=2562383102;this.u[3]=271733878;this.u[4]=3285377520;this.mc=this.eb=0};
function eb(a,b){var c;c||(c=0);for(var d=a.Vc,e=c;e<c+64;e+=4)d[e/4]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3];for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}c=a.u[0];for(var i=a.u[1],j=a.u[2],m=a.u[3],s=a.u[4],t,e=0;80>e;e++)40>e?20>e?(f=m^i&(j^m),t=1518500249):(f=i^j^m,t=1859775393):60>e?(f=i&j|m&(i|j),t=2400959708):(f=i^j^m,t=3395469782),f=(c<<5|c>>>27)+f+s+t+d[e]&4294967295,s=m,m=j,j=(i<<30|i>>>2)&4294967295,i=c,c=f;a.u[0]=a.u[0]+c&4294967295;a.u[1]=a.u[1]+i&
4294967295;a.u[2]=a.u[2]+j&4294967295;a.u[3]=a.u[3]+m&4294967295;a.u[4]=a.u[4]+s&4294967295}db.prototype.update=function(a,b){u(b)||(b=a.length);var c=this.Yb,d=this.eb,e=0;if(v(a))for(;e<b;)c[d++]=a.charCodeAt(e++),64==d&&(eb(this,c),d=0);else for(;e<b;)c[d++]=a[e++],64==d&&(eb(this,c),d=0);this.eb=d;this.mc+=b};function fb(){this.La={};this.length=0}fb.prototype.setItem=function(a,b){this.La.hasOwnProperty(a)||(this.length+=1);this.La[a]=b};fb.prototype.getItem=function(a){return this.La.hasOwnProperty(a)?this.La[a]:l};fb.prototype.removeItem=function(a){this.La.hasOwnProperty(a)&&(this.length-=1,delete this.La[a])};var gb=l;
if("undefined"!==typeof sessionStorage)try{sessionStorage.setItem("firebase-sentinel","cache"),sessionStorage.removeItem("firebase-sentinel"),gb=sessionStorage}catch(hb){gb=new fb}else gb=new fb;function ib(a,b,c,d){this.host=a;this.rb=b;this.Ca=c;this.M=d||gb.getItem(c)||this.host}function jb(a,b){b!==a.M&&(a.M=b,"s-"===a.M.substr(0,2)&&gb.setItem(a.Ca,a.M))};var kb,lb,mb,nb;function ob(){return ba.navigator?ba.navigator.userAgent:l}nb=mb=lb=kb=n;var pb;if(pb=ob()){var qb=ba.navigator;kb=0==pb.indexOf("Opera");lb=!kb&&-1!=pb.indexOf("MSIE");mb=!kb&&-1!=pb.indexOf("WebKit");nb=!kb&&!mb&&"Gecko"==qb.product}var rb=lb,sb=nb,tb=mb;var ub;if(kb&&ba.opera){var vb=ba.opera.version;"function"==typeof vb&&vb()}else sb?ub=/rv\:([^\);]+)(\)|;)/:rb?ub=/MSIE\s+([^\);]+)(\)|;)/:tb&&(ub=/WebKit\/(\S+)/),ub&&ub.exec(ob());var wb=l,xb=l;
function yb(a,b){ea(a)||g(Error("encodeByteArray takes an array as a parameter"));if(!wb){wb={};xb={};for(var c=0;65>c;c++)wb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),xb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?xb:wb,d=[],e=0;e<a.length;e+=3){var f=a[e],i=e+1<a.length,j=i?a[e+1]:0,m=e+2<a.length,s=m?a[e+2]:0,t=f>>2,f=(f&3)<<4|j>>4,j=(j&15)<<2|s>>6,s=s&63;m||(s=64,i||(j=64));d.push(c[t],c[f],c[j],c[s])}return d.join("")}
;var zb,Cb=1;zb=function(){return Cb++};function J(a,b){a||g(Error("Firebase INTERNAL ASSERT FAILED:"+b))}function Db(a){var b=ra(a),a=new db;a.update(b);var b=[],c=8*a.mc;56>a.eb?a.update(a.Jb,56-a.eb):a.update(a.Jb,64-(a.eb-56));for(var d=63;56<=d;d--)a.Yb[d]=c&255,c/=256;eb(a,a.Yb);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c++]=a.u[d]>>e&255;return yb(b)}
function Eb(){for(var a="",b=0;b<arguments.length;b++)a=ea(arguments[b])?a+Eb.apply(l,arguments[b]):"object"===typeof arguments[b]?a+y(arguments[b]):a+arguments[b],a+=" ";return a}var Fb=l;function L(){if(Fb){var a=Eb.apply(l,arguments);Fb(a)}}function Gb(a){return function(){L(a,arguments)}}function Hb(){if("undefined"!==typeof console){var a=Eb.apply(l,arguments);console.log("FIREBASE INTERNAL ERROR: "+a)}}
function Ib(){if("undefined"!==typeof console){var a=Eb.apply(l,arguments);console.log("FIREBASE WARNING: "+a)}}function Jb(a){for(var b="",a=a.split("/"),c=0;c<a.length;c++)if(0<a[c].length){var d=a[c];try{d=decodeURIComponent(d.replace(/\+/g," "))}catch(e){}b+="/"+d}return b}var Ea=/^[\-+]?[0-9]*\.?[0-9]+(e\-|e\+|E\-|E\+|e|E)?[0-9]*$/;function Kb(a,b){return a!==b?a===l?-1:b===l?1:typeof a!==typeof b?"number"===typeof a?-1:1:a>b?1:-1:0}
function Lb(a,b){if(b&&a in b)return b[a];g(Error("Missing required key ("+a+") in object: "+JSON.stringify(b)))}var Mb=0;function Ha(a){if("object"!==typeof a||a===l)return y(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=y(b[d]),c+=":",c+=Ha(a[b[d]]);return c+"}"}function Nb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}
function Ob(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])};function Pb(a,b){this.wa=a;J(this.wa!==l,"LeafNode shouldn't be created with null value.");this.Va="undefined"!==typeof b?b:l}p=Pb.prototype;p.da=o(k);p.i=aa("Va");p.Wb=function(a){return new Pb(this.wa,a)};p.L=function(){return M};p.K=function(a){return D(a)===l?this:M};p.T=o(l);p.B=function(a,b){return(new N(new K,this.Va)).B(a,b)};p.wb=function(a,b){var c=D(a);return c===l?b:this.B(c,M.wb(Ia(a),b))};p.e=o(n);p.Eb=o(0);
p.Z=function(a){return a&&this.i()!==l?{".value":this.j(),".priority":""+this.i()}:this.j()};p.hash=function(){var a="";this.i()!==l&&(a+="priority:"+this.i()+":");a+=typeof this.wa+":"+this.wa;return Db(a)};p.j=aa("wa");p.toString=function(){return"string"===typeof this.wa?'"'+this.wa+'"':this.wa};function N(a,b){this.O=a||new K;this.Va="undefined"!==typeof b?b:l}p=N.prototype;p.da=o(n);p.i=aa("Va");p.Wb=function(a){return new N(this.O,a)};p.B=function(a,b){var c=this.O.remove(a);b&&b.e()&&(b=l);b!==l&&(c=c.ca(a,b));return b&&b.i()!==l?new Qb(c,l,this.Va):new N(c,this.Va)};p.wb=function(a,b){var c=D(a);if(c===l)return b;var d=this.L(c).wb(Ia(a),b);return this.B(c,d)};p.e=function(){return this.O.e()};p.Eb=function(){return this.O.count()};var Rb=/^\d+$/;p=N.prototype;
p.Z=function(a){if(this.e())return l;var b={},c=0,d=0,e=k;this.F(function(f,i){b[f]=i.Z(a);c++;e&&Rb.test(f)?d=Math.max(d,Number(f)):e=n});if(!a&&e&&d<2*c){var f=[],i;for(i in b)f[i]=b[i];return f}a&&this.i()!==l&&(b[".priority"]=""+this.i());return b};p.hash=function(){var a="";this.i()!==l&&(a+="priority:"+this.i()+":");this.F(function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});return""===a?"":Db(a)};p.L=function(a){a=this.O.get(a);return a===l?M:a};
p.K=function(a){var b=D(a);return b===l?this:this.L(b).K(Ia(a))};p.T=function(a){return Ra(this.O,a)};p.xc=function(){return this.O.hb()};p.zc=function(){return this.O.Sa()};p.F=function(a){return this.O.ma(a)};p.$b=function(a){return this.O.Fa(a)};p.Pa=function(){return this.O.Pa()};p.toString=function(){var a="{",b=k;this.F(function(c,d){b?b=n:a+=", ";a+='"'+c+'" : '+d.toString()});return a+="}"};var M=new N(new K);function Qb(a,b,c){N.call(this,a,c);b===l&&(b=new K(Sb),a.ma(function(a,c){b=b.ca({name:a,ra:c.i()},c)}));this.Ja=b}ja(Qb,N);p=Qb.prototype;p.B=function(a,b){var c=this.L(a),d=this.O,e=this.Ja;c!==l&&(d=d.remove(a),e=e.remove({name:a,ra:c.i()}));b&&b.e()&&(b=l);b!==l&&(d=d.ca(a,b),e=e.ca({name:a,ra:b.i()},b));return new Qb(d,e,this.i())};p.T=function(a,b){var c=Ra(this.Ja,{name:a,ra:b.i()});return c?c.name:l};p.F=function(a){return this.Ja.ma(function(b,c){return a(b.name,c)})};
p.$b=function(a){return this.Ja.Fa(function(b,c){return a(b.name,c)})};p.Pa=function(){return this.Ja.Pa(function(a,b){return{key:a.name,value:b}})};p.xc=function(){return this.Ja.hb().name};p.zc=function(){return this.Ja.Sa().name};function O(a,b){if("object"!==typeof a)return new Pb(a,b);if(a===l)return M;var c=l;".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);c!==l&&(c=Ea.test(c)?Number(c):c);if(".value"in a&&a[".value"]!==l)return new Pb(a[".value"],c);var c=new N(new K,c),d;for(d in a)if(a.hasOwnProperty(d)&&"."!==d.substring(0,1)){var e=O(a[d]);if(e.da()||!e.e())c=c.B(d,e)}return c}function Sb(a,b){return Kb(a.ra,b.ra)||(a.name!==b.name?a.name<b.name?-1:1:0)};function P(a,b){this.k=a;this.Pb=b}P.prototype.Z=function(){z("Firebase.DataSnapshot.val",0,0,arguments.length);return this.k.Z()};P.prototype.val=P.prototype.Z;P.prototype.dd=function(){z("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.k.Z(k)};P.prototype.exportVal=P.prototype.dd;P.prototype.H=function(a){z("Firebase.DataSnapshot.child",0,1,arguments.length);fa(a)&&(a=String(a));Ca("Firebase.DataSnapshot.child",a);var b=new F(a),c=this.Pb.H(b);return new P(this.k.K(b),c)};
P.prototype.child=P.prototype.H;P.prototype.fd=function(a){z("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Ca("Firebase.DataSnapshot.hasChild",a);var b=new F(a);return!this.k.K(b).e()};P.prototype.hasChild=P.prototype.fd;P.prototype.i=function(){z("Firebase.DataSnapshot.getPriority",0,0,arguments.length);var a=this.k.i();return a===l?a:""+a};P.prototype.getPriority=P.prototype.i;
P.prototype.forEach=function(a){z("Firebase.DataSnapshot.forEach",1,1,arguments.length);C("Firebase.DataSnapshot.forEach",1,a,n);if(this.k.da())return n;var b=this;return this.k.F(function(c,d){return a(new P(d,b.Pb.H(c)))})};P.prototype.forEach=P.prototype.forEach;P.prototype.Bb=function(){z("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.k.da()?n:!this.k.e()};P.prototype.hasChildren=P.prototype.Bb;
P.prototype.name=function(){z("Firebase.DataSnapshot.name",0,0,arguments.length);return this.Pb.name()};P.prototype.name=P.prototype.name;P.prototype.Eb=function(){z("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.k.Eb()};P.prototype.numChildren=P.prototype.Eb;P.prototype.ud=function(){z("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.Pb};P.prototype.ref=P.prototype.ud;var Tb={};var Q;Q=n;function Ub(a){this.hc=a;this.Lb=[];this.Oa=0;this.Zb=-1;this.pa=l}function Vb(a,b,c){for(a.Lb[b]=c;a.Lb[a.Oa];){b=a.Lb[a.Oa];delete a.Lb[a.Oa];for(c=0;c<b.length;++c)b[c]&&a.hc(b[c]);if(a.Oa===a.Zb){a.pa&&(clearTimeout(a.pa),a.pa(),a.pa=l);break}a.Oa++}};if(Q){var Wb=require("http"),Yb=function(a,b,c){this.zb=a;this.c=Gb(a);this.z=b;this.Ia=c;this.U=this.Ba=n;this.W=new Xb;this.buffer={};this.X=[];this.sd=function(a){b.host!==b.M&&(a.ns=b.Ca);var c=[],f;for(f in a)a.hasOwnProperty(f)&&c.push(f+"="+a[f]);return"/.hp?"+c.join("&")}};Yb.isAvailable=o(n);p=Yb.prototype;p.open=function(a,b){this.ab=0;this.G=b;this.rd=new Ub(a);var c=this;this.P=setTimeout(function(){c.c("Timed out trying to connect.");c.close();c.P=l},3E4);var d=Math.floor(1E8*Math.random()),
e={start:"t"};e.ser=d;e.v="4";this.Ia&&(e.s=this.Ia);this.c("Connecting via httppoll to "+this.z.M);this.bc(d,e)};p.start=function(){this.Ad()};p.send=function(a){for(var a=y(a),a=yb(ra(a),k),a=Nb(a,1048576),b=0;b<a.length;++b)this.bd(this.ab,a.length,a[b]),this.ab++};p.close=function(){this.U||(this.c("Httppoll is being closed"),this.Zc(),this.ua())};p.bd=function(a,b,c){this.X.push({jc:a,oc:b,cb:c});this.Za&&this.oa()};p.Ad=function(){this.Za=k;for(this.bb=Math.floor(1E8*Math.random());this.oa(););
};p.oa=function(){if(this.Za&&this.W.count()<(0<this.X.length?2:1)){var a=this.bb++,b={};b.id=this.id;b.pw=this.Ua;b.ser=a;for(var c=[];0<this.X.length;)if(1048608>=this.X[0].cb.length){var d=this.X.shift();c.push(d.jc+":"+d.oc+":"+d.cb)}else break;var e=this,d=setTimeout(function(){e.W.remove(a);e.oa()},25E3);this.W.add(a,d);this.bc(a,b,c.join("\n"));return k}return n};p.fa=function(){this.U||(this.c("Httppoll is closing itself"),this.ua(),this.G&&(this.G(this.Ba),this.G=l))};p.ua=function(){this.U=
k;this.Za=n;this.qc();Ob(this.W.set,function(a,b){clearTimeout(b)});this.W.clear()};p.ld=function(a,b){var c=a.toString();this.buffer[b]=b in this.buffer?this.buffer[b]+c:c};p.nd=function(a){if(a in this.buffer){var b=this.buffer[a];delete this.buffer[a];b=qa(b);a=parseInt(Lb("x-firebase-response",a.headers));Vb(this.rd,a,b)}};p.qc=function(){this.P&&(clearTimeout(this.P),this.P=l)};p.Wc=function(a){(a=this.W.get(a))&&clearTimeout(a)};p.pd=function(a,b){this.qc();this.Wc(a);this.W.remove(a);this.oa();
if(200!=b.statusCode)this.c("error code received: "+b.statusCode),this.fa();else{"x-firebase-poll-id"in b.headers&&"x-firebase-poll-pw"in b.headers&&(this.id=b.headers["x-firebase-poll-id"],this.Ua=b.headers["x-firebase-poll-pw"]);"x-firebase-poll-close"in b.headers&&(this.c("recvd close"),this.Za=n);var c=this;b.on("data",function(a){c.ld(a,b)});b.on("end",function(){c.nd(b)})}};p.bc=function(a,b,c){var c=c||"",b=this.sd(b),d=this.z.M,e=d.split(":"),f=this.z.rb?443:80;1<e.length&&(d=e[0],f=parseInt(e[1]));
var i=this,b=Wb.request({method:"POST",host:d,port:f,path:b},function(b){i.pd(a,b)});b.on("error",function(a){i.c("An error occurred: "+a.message);i.fa()});b.end(c)};p.Zc=function(){if(this.Za&&this.id&&this.Ua){this.c("doing a disconnect");var a={};a.id=this.id;a.pw=this.Ua;a.disconn="t";this.bc(0,a)}}}else Yb={isAvailable:o(n)};var Zb=l;Q?Zb=require("faye-websocket").Client:"undefined"!==typeof MozWebSocket?Zb=MozWebSocket:"undefined"!==typeof WebSocket&&(Zb=WebSocket);function R(a,b,c){this.zb=a;this.c=Gb(this.zb);this.fb=l;this.state=0;this.frames=l;this.Rc=0;this.Na=(b.rb?"wss://":"ws://")+b.M+"/.ws?v=4";b.host!==b.M&&(this.Na=this.Na+"&ns="+b.Ca);c&&(this.Na=this.Na+"&s="+c)}var $b;
R.prototype.open=function(a,b){this.qa=b;this.Hb=a;this.c("websocket connecting to "+this.Na);this.Q=new Zb(this.Na);this.Ba=n;var c=this;this.Q.onopen=function(){c.c("Websocket connected.");c.state=1;c.Ba=k};this.Q.onclose=function(){c.c("Websocket connection was disconnected.");c.Q=l;c.fa()};this.Q.onmessage=function(a){c.Q!==l&&(a=a.data,1===c.state?(c.Rc=Number(a),c.state=2,c.frames=[]):2===c.state?(c.frames.push(a),c.frames.length==c.Rc&&(a=qa(c.frames.join("")),c.state=1,ac(c),c.Hb(a))):Hb("Websocket got a frame in an unknown state: "+
c.state))};this.Q.onerror=function(){c.c("WebSocket error.  Closing connection.");c.fa()}};R.prototype.start=function(){};R.isAvailable=function(){return!("undefined"!==typeof navigator&&"Opera"===navigator.appName)&&Zb!==l&&!$b};R.prototype.send=function(a){ac(this);a=y(a);a=Nb(a,16384);this.Q.send(String(a.length));for(var b=0;b<a.length;b++)this.Q.send(a[b])};R.prototype.ua=function(){this.U=k;this.fb&&(clearTimeout(this.fb),this.fb=l);this.Q&&(this.Q.close(),this.Q=l)};
R.prototype.fa=function(){this.U||(this.c("WebSocket is closing itself"),this.ua(),this.qa&&(this.qa(this.Ba),this.qa=l))};R.prototype.close=function(){this.U||(this.c("WebSocket is being closed"),this.ua())};function ac(a){clearTimeout(a.fb);a.fb=setInterval(function(){a.Q.send("0");ac(a)},45E3)};function Xb(){this.set={}}p=Xb.prototype;p.add=function(a,b){this.set[a]=b!==l?b:k};p.get=function(a){return this.set[a]};p.remove=function(a){delete this.set[a]};p.clear=function(){this.set={}};p.e=function(){for(var a in this.set)return n;return k};p.count=function(){var a=0,b;for(b in this.set)a++;return a};var bc="pLPCommand",cc="pRTLPCB";function S(a,b,c){this.zb=a;this.c=Gb(a);this.Fd=b;this.Ia=c;this.Ba=n;this.Xa=function(a){b.host!==b.M&&(a.ns=b.Ca);var c=[],f;for(f in a)a.hasOwnProperty(f)&&c.push(f+"="+a[f]);return(b.rb?"https://":"http://")+b.M+"/.lp?"+c.join("&")}}
S.prototype.open=function(a,b){function c(){if(!d.U){d.Ga=new dc(function(a,b,c){d.Ga&&((d.P&&(clearTimeout(d.P),d.P=l),d.Ba=k,"start"==a)?(d.id=b,d.Ua=c):"close"===a?b?(a=d.Ec,a.Zb=b,a.pa=function(){d.fa()},a.Zb<a.Oa?(a.pa(),a.pa=l):setTimeout(a.pa,2E4)):d.fa():g(Error("Unrecognized command received: "+a)))},function(a,b){Vb(d.Ec,a,b)},function(){d.fa()},d.Xa);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());a.v="4";d.Ia&&(a.s=d.Ia);a=d.Xa(a);d.c("Connecting via long-poll to "+a);ec(d.Ga,a,
function(){})}}this.ab=0;this.G=b;this.Ec=new Ub(a);this.U=n;var d=this;this.P=setTimeout(function(){d.c("Timed out trying to connect.");d.close();d.P=l},3E4);if(Q||"complete"===document.readyState)c();else{var e=n,f=function(){document.body?e||(e=k,c()):setTimeout(f,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,n),window.addEventListener("load",f,n)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&f()},
n),window.attachEvent("onload",f,n))}};S.prototype.start=function(){var a=this.Ga,b=this.Ua;a.cc=this.id;a.Dc=b;for(a.Xb=k;a.oa(););a=this.id;b=this.Ua;if(!Q){this.Ta=document.createElement("iframe");var c={dframe:"t"};c.id=a;c.pw=b;a=this.Xa(c);this.Ta.src=a;this.Ta.style.display="none";document.body.appendChild(this.Ta)}};S.isAvailable=function(){return!Q||h};
S.prototype.ua=function(){this.U=k;this.Ga&&(this.Ga.close(),this.Ga=l);this.Ta&&(document.body.removeChild(this.Ta),this.Ta=l);this.P&&(clearTimeout(this.P),this.P=l)};S.prototype.fa=function(){this.U||(this.c("Longpoll is closing itself"),this.ua(),this.G&&(this.G(this.Ba),this.G=l))};S.prototype.close=function(){this.U||(this.c("Longpoll is being closed."),this.ua())};
S.prototype.send=function(a){for(var a=y(a),a=yb(ra(a),k),a=Nb(a,1840),b=0;b<a.length;b++){var c=this.Ga;c.X.push({jc:this.ab,oc:a.length,cb:a[b]});c.Xb&&c.oa();this.ab++}};
function dc(a,b,c,d){this.Xa=d;this.qa=c;this.W=new Xb;this.X=[];this.bb=Math.floor(1E8*Math.random());if(Q)this.Xc=a,this.od=b;else{c=zb();window[bc+c]=a;window[cc+c]=b;a=document.createElement("iframe");a.style.display="none";document.body?document.body.appendChild(a):g("Document body has not initialized. Wait to initialize Firebase until after the document is ready.");a.contentDocument?a.la=a.contentDocument:a.contentWindow?a.la=a.contentWindow.document:a.document&&(a.la=a.document);this.ea=a;
a="<html><body><script>\nfunction "+bc+'(c, a1, a2, a3, a4) {\nparent.window["'+bc+c+'"](c, a1, a2, a3, a4);\n}\nfunction '+cc+'(pN, data) {\nparent.window["'+cc+c+'"](pN, data);\n}\n<\/script></body></html>\n';try{this.ea.la.open(),this.ea.la.write(a),this.ea.la.close()}catch(e){L("frame writing exception"),e.stack&&L(e.stack),L(e)}}}
dc.prototype.close=function(){this.Xb=n;this.ea&&(this.ea.la.body.innerHTML="",document.body.removeChild(this.ea),this.ea=l);if(Q&&this.cc){var a={disconn:"t"};a.id=this.cc;a.pw=this.Dc;a=this.Xa(a);fc(a)}if(a=this.qa)this.qa=l,a()};
dc.prototype.oa=function(){if(this.Xb&&this.W.count()<(0<this.X.length?2:1)){this.bb++;var a={};a.id=this.cc;a.pw=this.Dc;a.ser=this.bb;for(var a=this.Xa(a),b="",c=0;0<this.X.length;)if(1870>=this.X[0].cb.length+30+b.length){var d=this.X.shift(),b=b+"&seg"+c+"="+d.jc+"&ts"+c+"="+d.oc+"&d"+c+"="+d.cb;c++}else break;var a=a+b,e=this.bb,f=this;f.W.add(e);var i=function(){f.W.remove(e);f.oa()},j=setTimeout(i,25E3);ec(this,a,function(){clearTimeout(j);i()});return k}return n};
function ec(a,b,c){Q?a.$c(b,c):setTimeout(function(){try{var d=a.ea.la.createElement("script");d.type="text/javascript";d.async=k;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;if(!a||"loaded"===a||"complete"===a)d.onload=d.onreadystatechange=l,d.parentNode&&d.parentNode.removeChild(d),c()};d.onerror=function(){L("Long-poll script failed to load.");a.close()};a.ea.la.body.appendChild(d)}catch(e){}},1)}
if("undefined"!==typeof Q&&Q){var fc=function(a,b){gc||(gc=require("request"));gc(a,function(a,d,e){a&&g("Rest request for "+url+" failed.");b&&b(e)})},gc;dc.prototype.$c=function(a,b){var c=this;fc({url:a,Ed:k},function(a){c.cd(a);b()})};dc.prototype.cd=function(a){eval("var document = function("+bc+", "+cc+") {"+a+"}");document(this.Xc,this.od)}};function hc(){var a=[];Ob(ic,function(b,c){c&&c.isAvailable()&&a.push(c)});this.Ub=a}var ic=[S,Yb,R];function T(a,b,c,d,e,f){this.id=a;this.c=Gb("c:"+this.id+":");this.hc=c;this.ib=d;this.G=e;this.gc=f;this.z=b;this.Kb=[];this.rc=0;this.nc=new hc;this.ha=0;this.c("Connection created");jc(this)}function jc(a){var b;var c=a.nc;0<c.Ub.length?b=c.Ub[0]:g(Error("No transports available"));a.D=new b("c:"+a.id+":"+a.rc++,a.z);b=kc(a,a.D);c=lc(a,a.D);a.ub=a.D;a.qb=a.D;a.D.open(b,c);a.o=l}
function lc(a,b){return function(c){b===a.D?(a.D=l,!c&&0===a.ha?(a.c("Realtime connection failed."),"s-"===a.z.M.substr(0,2)&&(gb.removeItem(a.z.Ca),a.z.M=a.z.host)):1===a.ha&&a.c("Realtime connection lost."),a.close()):b===a.o?(c=a.o,a.o=l,(a.ub===c||a.qb===c)&&a.close()):a.c("closing an old connection")}}
function kc(a,b){return function(c){if(2!=a.ha)if(b===a.qb){var d=Lb("t",c),c=Lb("d",c);if("c"==d){if(d=Lb("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.Ia=c.s;jb(a.z,f);if(0==a.ha&&(a.D.start(),c=a.D,a.c("Realtime connection established."),a.D=c,a.ha=1,a.ib&&(a.ib(d),a.ib=l),"4"!==e&&Ib("Protocol version mismatch detected"),c=1<a.nc.Ub.length?a.nc.Ub[1]:l))a.o=new c("c:"+a.id+":"+a.rc++,a.z,a.Ia),a.o.open(kc(a,a.o),lc(a,a.o))}else if("n"===d){a.c("recvd end transmission on primary");
a.qb=a.o;for(c=0;c<a.Kb.length;++c)a.Fb(a.Kb[c]);a.Kb=[];mc(a)}else"s"===d?(a.c("Connection shutdown command received. Shutting down..."),a.gc&&(a.gc(c),a.gc=l),a.G=l,a.close()):"r"===d?(a.c("Reset packet received.  New host: "+c),jb(a.z,c),1===a.ha?a.close():(nc(a),jc(a))):Hb("Unknown control packet command: "+d)}else"d"==d&&a.Fb(c)}else b===a.o?(d=Lb("t",c),c=Lb("d",c),"c"==d?"t"in c&&(c=c.t,"a"===c?(a.o.start(),a.c("sending client ack on secondary"),a.o.send({t:"c",d:{t:"a",d:{}}}),a.c("Ending transmission on primary"),
a.D.send({t:"c",d:{t:"n",d:{}}}),a.ub=a.o,mc(a)):"r"===c&&(a.c("Got a reset on secondary, closing it"),a.o.close(),(a.ub===a.o||a.qb===a.o)&&a.close())):"d"==d?a.Kb.push(c):g(Error("Unknown protocol layer: "+d))):a.c("message on old connection")}}T.prototype.kc=function(a){a={t:"d",d:a};1!==this.ha&&g("Connection is not connected");this.ub.send(a)};function mc(a){a.ub===a.o&&a.qb===a.o&&(a.c("cleaning up and promoting a connection: "+a.o.zb),a.D=a.o,a.o=l)}T.prototype.Fb=function(a){this.hc(a)};
T.prototype.close=function(){2!==this.ha&&(this.c("Closing realtime connection."),this.ha=2,nc(this),this.G&&(this.G(),this.G=l))};function nc(a){a.c("Shutting down all connections");a.D&&(a.D.close(),a.D=l);a.o&&(a.o.close(),a.o=l)};function oc(a,b,c,d){this.id=pc++;this.c=Gb("p:"+this.id+":");this.tb=k;this.$={};this.N=[];this.jb=0;this.fc={};this.ba=n;this.Ob=1E3;this.Gc=c;this.G=d;this.z=a;this.Gb=b;this.Mb=[];this.ta={};this.yd=0;this.gb=this.Cc=l;setTimeout(x(this.tc,this),0)}var pc=0,qc=0;p=oc.prototype;
p.Ha=function(a,b,c,d){var e=++this.yd,a={r:e,a:a,b:b};this.c(JSON.stringify(a));this.ba?this.nb.kc(a):this.Mb.push(a);var f=this,a=setTimeout(function(){var a=f.ta[e];a&&(delete f.ta[e],a.aa&&a.aa.Ib&&a.aa.Ib())},45E3);this.ta[e]={aa:{Hb:c,Ib:d},Pc:a}};function rc(a,b,c,d){var e=Ha(c);a.c("Listen on "+b+" for "+e);b={p:b};"default"!==e&&(b.q=c);a.Ha("l",b,function(b){a.c("listen response",b);d&&d(b.s)},function(){a.c("timed out on listen...")})}
p.$a=function(a,b){this.Ab={Yc:a,vc:n,ja:b};this.c("Authenticating using credential: "+this.Ab);sc(this)};p.vb=function(){delete this.Ab;this.ba&&this.Ha("unauth",{},function(){},function(){})};function sc(a){var b=a.Ab;a.ba&&b&&a.Ha("auth",{cred:b.Yc},function(c){(c="ok"==c.s)||delete a.Ab;b.vc||(b.vc=k,b.ja&&b.ja(c))},function(){a.c("timed out on auth...")})}
p.Bd=function(a,b){var c=Ha(b);J(this.$[a][c],"unlisten() called for path/queryId we're not listening on.");delete this.$[a][c];if(this.ba){c=Ha(b);this.c("Unlisten on "+a+" for "+c);var d=this,e={p:a};"default"!==c&&(e.q=b);this.Ha("u",e,l,function(){d.c("timed out on unlisten...")})}};p.qa=function(a,b){this.fc[a]=b;this.ba&&tc(this,a,b)};
function tc(a,b,c){b={p:b,d:c};a.c("onDisconnect",b);a.Ha("o",b,function(a){"ok"!==a.s&&g("onDisconnect failed: "+y(a.d))},function(){a.c("timed out on onDisconnect...")})}p.put=function(a,b,c,d){uc(this,"p",a,b,c,d)};function uc(a,b,c,d,e,f){c={p:c,d:d};u(f)&&(c.h=f);a.N.push({action:b,Kc:c,I:e});a.jb++;b=a.N.length-1;a.ba&&vc(a,b)}
function vc(a,b){var c=a.N[b].action,d=a.N[b].I;a.Ha(c,a.N[b].Kc,function(e){a.c(c+" response",e);delete a.N[b];a.jb--;0===a.jb&&(a.N=[]);d&&d(e.s)},function(){a.c("timed out on put...")})}
p.Fb=function(a){if("r"in a){this.c("from server: "+JSON.stringify(a));var b=a.r,c=this.ta[b];c&&(delete this.ta[b],clearTimeout(c.Pc),c.aa&&c.aa.Hb&&c.aa.Hb(a.b))}else"error"in a&&g("A server-side error has occurred: "+a.error),"a"in a&&(b=a.a,a=a.b,this.c("handleServerMessage",b,a),"d"===b?this.Gb(a.p,a.d):"m"===b?this.Gb(a.p,a.d,k):Hb("Unrecognized action received from server: "+y(b)+"\nAre you using the latest client?"))};
p.ib=function(a){this.c("connection ready");this.ba=k;this.gb=(new Date).getTime();Mb=a-(new Date).getTime();for(a=0;a<this.Mb.length;a++)this.nb.kc(this.Mb[a]);this.Mb=[];sc(this);for(var b in this.$)for(var c in this.$[b])a=this.$[b][c],rc(this,b,a.td,a.I);for(b in this.fc)tc(this,b,this.fc[b]);for(b=0;b<this.N.length;b++)this.N[b]&&vc(this,b);this.Gc&&this.Gc()};
p.Ic=function(){this.ba=n;this.c("data client disconnected");if(!this.tb){for(var a=0;a<this.N.length;a++){var b=this.N[a];b&&"h"in b.Kc&&(b.I&&b.I("disconnect"),delete this.N[a],this.jb--)}0===this.jb&&(this.N=[]);for(var c in this.ta)a=this.ta[c],delete this.ta[c],a!==l&&(a.aa&&a.aa.Ib&&a.aa.Ib(),clearTimeout(a.Pc))}var d=x(function(){this.tc()},this);this.tb?(this.gb&&(3E4<(new Date).getTime()-this.gb&&(this.Ob=1E3),this.gb=l),c=Math.max(0,this.Ob-((new Date).getTime()-this.Cc)),c*=Math.random(),
this.c("Trying to reconnect in "+c+"ms"),setTimeout(d,c),this.Ob=Math.min(3E4,1.3*this.Ob)):this.Mc=function(){setTimeout(d,0)};this.G&&this.G()};p.tc=function(){if(this.tb){this.c("Making a connection attempt");this.Cc=(new Date).getTime();this.gb=l;var a=x(this.Fb,this),b=x(this.ib,this),c=x(this.Ic,this),d=this.id+":"+qc++;this.nb=new T(d,this.z,a,b,c,function(a){g(Error(a))})}};p.Qa=function(){this.tb=n;this.nb?this.nb.close():this.Ic()};p.pb=function(){this.tb=k;this.Mc();this.Mc=h};function wc(){this.Wa=M}function U(a,b){return a.Wa.K(b)}function V(a,b,c){a.Wa=a.Wa.wb(b,c)};function xc(){this.sb=new wc;this.V=new wc;this.xa=new wc;this.lb=new La}function yc(a,b){for(var c=U(a.sb,b),d=U(a.V,b),e=G(a.lb,b),f=n,i=e;i!==l;){if(i.j()!==l){f=k;break}i=i.parent()}if(f)return n;c=zc(c,d,e);return c!==d?(V(a.V,b,c),k):n}function zc(a,b,c){if(c.e())return a;if(c.j()!==l)return b;a=a||M;c.F(function(d){var d=d.name(),e=a.L(d),f=b.L(d),i=G(c,d),e=zc(e,f,i);a=a.B(d,e)});return a}xc.prototype.set=function(a,b){var c=zb();H(G(this.lb,a),c);V(this.V,a,b);return c};
function Ac(a,b,c){a=G(a.lb,b);b=a.j();J(b!==l,"pendingPut should not be null.");b===c&&H(a,l)};function Bc(){this.Aa=[]}function Ec(a,b){if(0!==b.length){a.Aa.push.apply(a.Aa,b);for(var c=0;c<a.Aa.length;c++)if(a.Aa[c]){var d=a.Aa[c];a.Aa[c]=l;var e=d.ja;e(d.Oc,d.mb)}a.Aa=[]}};function W(a,b,c,d){this.type=a;this.ga=b;this.S=c;this.mb=d};function Fc(a){this.A=a;this.ka=[];this.uc=new Bc}function Gc(a,b,c){for(var d=n,e=a.ka.length-1;0<=e;e--){var f=a.ka[e];if(!b||f.type===b&&(!c||f.ja===c))if(a.ka.splice(e,1),d=k,b&&c)break}return d}Fc.prototype.Nb=function(a,b){b=this.ic(a,b);Hc(this,b)};
function Hc(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type,i=new X(a.A.n,a.A.path);b[d].S&&(i=i.H(b[d].S));i=new P(b[d].ga,i);"value"===e.type&&!i.Bb()?f+="("+i.Z()+")":"value"!==e.type&&(f+=" "+i.name());L(a.A.n.w.id+": event:"+a.A.path+":"+a.A.Da()+":"+f);for(f=0;f<a.ka.length;f++){var j=a.ka[f];b[d].type===j.type&&c.push({ja:j.ja,Oc:i,mb:e.mb})}}Ec(a.uc,c)}function Ic(a){var b=[];if(!a.da()){var c=l;a.F(function(a,e){b.push(new W("child_added",e,a,c));c=a})}return b}
function Jc(a){a.Ra||(a.Ra=k,Hc(a,[new W("value",a.f)]))};function Kc(a,b){Fc.call(this,a);this.f=b}ja(Kc,Fc);Kc.prototype.ic=function(a,b){this.f=a;this.Ra&&b.push(new W("value",this.f));return b};function Lc(a,b){this.sc=a;this.Hc=b}function Mc(a,b,c,d){var e,f=[];c===d?e=n:c.da()&&d.da()?e=c.j()!==d.j():c.da()?(Nc(a,b,M,d,f),e=k):d.da()?(Nc(a,b,c,M,f),e=k):e=Nc(a,b,c,d,f);(e=e||c.i()!==d.i())&&a.Hc(b,d,f);return e}
function Nc(a,b,c,d,e){var f=n,i=!G(a.sc,b).e(),j=[],m=[],s=[],t={},I={},q,w,r,B;q=c.Pa();r=Ta(q);w=d.Pa();for(B=Ta(w);r!==l||B!==l;){c=r===l?1:B===l?-1:r.key===B.key?0:Sb({name:r.key,ra:r.value.i()},{name:B.key,ra:B.value.i()});if(0>c)f=t[r.key],u(f)?(s.push({wc:r,Qc:j[f]}),j[f]=l):(I[r.key]=m.length,m.push(r)),f=k,r=Ta(q);else{if(0<c)f=I[B.key],u(f)?(s.push({wc:m[f],Qc:B}),m[f]=l):(t[B.key]=j.length,j.push(B)),f=k;else{c=b.H(B.key);if(c=Mc(a,c,r.value,B.value))r=d.T(B.key,B.value),e.push(new W("child_changed",
B.value,B.key,r)),f=k;r=Ta(q)}B=Ta(w)}if(!i&&f)return k}for(i=0;i<m.length;i++)if(t=m[i])c=b.H(t.key),Mc(a,c,t.value,M),e.push(new W("child_removed",t.value,t.key));for(i=0;i<j.length;i++)if(m=j[i])c=b.H(m.key),r=d.T(m.key,m.value),Mc(a,c,M,m.value),e.push(new W("child_added",m.value,m.key,r));for(i=0;i<s.length;i++)m=s[i].wc,j=s[i].Qc,c=b.H(j.key),r=d.T(j.key,j.value),e.push(new W("child_moved",j.value,j.key,r)),(c=Mc(a,c,m.value,j.value))&&e.push(new W("child_changed",j.value,j.key,r));return f}
;function Oc(a,b){Fc.call(this,a);this.f=M;this.ic(b,Ic(b))}ja(Oc,Fc);
Oc.prototype.ic=function(a,b){var c=[],d=this.A;u(this.A.Ka)&&c.push(function(a){return 0<=(a!==d.Ka?a<d.Ka?-1:1:0)});u(this.A.ya)&&c.push(function(a){return 0>=(a!==d.ya?a<d.ya?-1:1:0)});u(this.A.va)&&c.push(function(a,b){return 0<=Kb(b,d.va)});u(this.A.za)&&c.push(function(a,b){return 0>=Kb(b,d.za)});var e=l,f=l;if(u(this.A.na))if(u(this.A.va)){if(e=Pc(a,c,this.A.na,n)){var i=a.L(e).i();c.push(function(a,b){var c=Kb(b,i);return 0>c||0===c&&a<=e})}}else if(f=Pc(a,c,this.A.na,k)){var j=a.L(f).i();
c.push(function(a,b){var c=Kb(b,j);return 0<c||0===c&&a>=f})}for(var m=[],s=[],t=[],I=[],q=0;q<b.length;q++){var w=b[q].S,r=b[q].ga;switch(b[q].type){case "child_added":Qc(c,w,r)&&(this.f=this.f.B(w,r),s.push(b[q]));break;case "child_removed":this.f.L(w).e()||(this.f=this.f.B(w,l),m.push(b[q]));break;case "child_changed":!this.f.L(w).e()&&Qc(c,w,r)&&(this.f=this.f.B(w,r),I.push(b[q]));break;case "child_moved":var B=!this.f.L(w).e(),Cc=Qc(c,w,r);B?Cc?(this.f=this.f.B(w,r),t.push(b[q])):(m.push(new W("child_removed",
this.f.L(w),w)),this.f=this.f.B(w,l)):Cc&&(this.f=this.f.B(w,r),s.push(b[q]))}}var Dc=e||f;if(Dc){var kd=(q=f!==l)?this.f.xc():this.f.zc(),Ab=n,Bb=n,Fa=this;(q?a.$b:a.F).call(a,function(a,b){Ab?(m.push(new W("child_removed",Fa.f.L(a),a)),Fa.f=Fa.f.B(a,l)):Bb&&(s.push(new W("child_added",b,a)),Fa.f=Fa.f.B(a,b));a===kd&&(Bb=k);a===Dc&&(Ab=k);if(Bb&&Ab)return k})}for(q=0;q<s.length;q++)c=s[q],w=this.f.T(c.S,c.ga),m.push(new W("child_added",c.ga,c.S,w));for(q=0;q<t.length;q++)c=t[q],w=this.f.T(c.S,c.ga),
m.push(new W("child_moved",c.ga,c.S,w));for(q=0;q<I.length;q++)c=I[q],w=this.f.T(c.S,c.ga),m.push(new W("child_changed",c.ga,c.S,w));this.Ra&&0<m.length&&m.push(new W("value",this.f));return m};function Pc(a,b,c,d){var e=l;(d?a.$b:a.F).call(a,function(a,d){if(Qc(b,a,d)&&(e=a,c--,0===c))return k});return e}function Qc(a,b,c){for(var d=0;d<a.length;d++)if(!a[d](b,c.i()))return n;return k};function Rc(a,b){this.w=a;this.g=b;this.Fc=b.Wa;this.Ya=new La}
Rc.prototype.xb=function(a,b,c){var d=a.path,e=G(this.Ya,d),f=e.j();f===l&&(f={},H(e,f));var i=a.Da();if(!(i in f)){f=f||{};f[i]={};var j=f,m=n;Oa(e,function(a){a.j()&&(a.j()["default"]&&a.j()["default"].J)&&(m=k)});m||(j[i].J=Sc(this,a),"default"===i&&Na(e,function(a){a=a.j();if(a!==l)for(var b in a)if(a[b].J){a[b].J();delete a[b].J}}))}e=f[i].view;e||(e=this.g.Wa.K(d),e="default"===a.Da()?new Kc(a,e):new Oc(a,e),f[i].view=e,(a=(a=Oa(G(this.Ya,d),function(a){if(a.j()&&a.j()["default"]&&a.j()["default"].view.Ra)return k}))||
this.w===l)&&Jc(e));a=e;a.ka.push({type:b,ja:c});d=[];f=Ic(a.f);a.Ra&&f.push(new W("value",a.f));for(i=0;i<f.length;i++)f[i].type===b&&(e=new X(a.A.n,a.A.path),f[i].S&&(e=e.H(f[i].S)),d.push({ja:c,Oc:new P(f[i].ga,e),mb:f[i].mb}));Ec(a.uc,d)};
Rc.prototype.ob=function(a,b,c){var d=G(this.Ya,a.path),e=d.j();if(!(e===l||!f in e)){var f=a.Da();if("default"!==f)d=e[f].view,Gc(d,b,c),0<d.ka.length||(e[f].J&&(e[f].J(),delete e[f].J),delete e[f]);else{var f=[],i;for(i in e)Gc(e[i].view,b,c)&&f.push(i);for(i=0;i<f.length;i++)b=f[i],e[b]&&!(0<e[b].view.ka.length)&&(e[b].J&&("default"===b&&Tc(this,d,e[b].view.Ra),e[b].J(),delete e[b].J),delete e[b])}}};function Uc(a,b,c){Na(G(a.Ya,b),function(a){if(a=a.j())for(var b in a)Jc(a[b].view)},c,k)}
Rc.prototype.sa=function(a,b){var c=this,d=this.Fc,e=this.g.Wa;this.Fc=e;1===arguments.length&&(b=k);var f=a.toString(),i=this.Ya,j=d.K(a),m=e.K(a),i=new Lc(i,function(a,d,e){a.toString().substring(0,f.length)===f?(b&&Uc(c,a,n),c.Nb(a,d,e),b&&Uc(c,a,k)):c.Nb(a,d,e)}),s=Mc(i,a,j,m),m=j.i()!==m.i();if(s||m)for(j=a;j.parent()!==l;){var t=d.K(j),I=e.K(j),q=j.parent();if(G(i.sc,q).j()){var w=e.K(q),r=[],j=j.R<j.m.length?j.m[j.m.length-1]:l;if(t.e())t=w.T(j,I),r.push(new W("child_added",I,j,t));else if(I.e())r.push(new W("child_removed",
t,j));else if(s&&(t=w.T(j,I),r.push(new W("child_changed",I,j,t))),m)t=w.T(j,I),r.push(new W("child_moved",I,j,t)),s=k;i.Hc(q,w,r)}j=q;m=n}b&&Uc(this,a,k)};Rc.prototype.Nb=function(a,b,c){a=G(this.Ya,a).j();if(a!==l)for(var d in a)a[d].view.Nb(b,c)};function Tc(a,b,c){b.F(function(b){var e=b.j();if(e&&"default"in e)J(!e["default"].J),e["default"].J=Sc(a,e["default"].view.A);else{if(e)for(var f in e)J(!e[f].J),e[f].J=Sc(a,e[f].view.A);Tc(a,b,c)}})}
function Sc(a,b){if(a.w){var c=b.path.toString(),d=a.w,e=Ga(b),f=function(d){"ok"!==d&&(Ib("on() or once() for "+c+" failed: "+d),a.ob(b))},i=Ha(e);d.$[c]=d.$[c]||{};J(!d.$[c][i],"listen() called twice for same path/queryId.");d.$[c][i]={td:e,I:f};d.ba&&rc(d,c,e,f);return x(a.w.Bd,a.w,c,Ga(b))}return ca};function Vc(a){this.z=a;this.w=new oc(this.z,x(this.Gb,this),x(this.kd,this),x(this.md,this));this.Tb=new La;this.g=new xc;this.ia=new Rc(this.w,this.g.xa);this.Ac=new wc;this.ac=new Rc(l,this.Ac);Wc(this,n)}p=Vc.prototype;p.toString=function(){return(this.z.rb?"https://":"http://")+this.z.host};p.name=function(){return this.z.Ca};
p.Gb=function(a,b,c){if(9<=a.length&&a.lastIndexOf(".priority")===a.length-9)a=new F(a.substring(0,a.length-9)),b!==l&&Ea.test(b)&&(b=Number(b)),c=U(this.g.sb,a).Wb(b);else if(c){var a=new F(a),c=U(this.g.sb,a),d;for(d in b)var e=O(b[d]),c=c.B(d,e)}else a=new F(a),c=O(b);b=this.g;d=a;V(b.sb,d,c);yc(b,d)&&(a=Xc(this,a),Yc(this,a),a=a.path());this.ia.sa(a)};p.kd=function(){Wc(this,k)};p.md=function(){Wc(this,n)};function Wc(a,b){var c=new F("/.info/connected");V(a.Ac,c,O(b));a.ac.sa(c)}
p.$a=function(a,b){this.w.$a(a,b)};p.vb=function(){this.w.vb()};p.Sb=function(a,b,c,d){c!==l&&Ea.test(c)&&(c=Number(c));this.c("set",{path:a.toString(),value:b});var b=O(b,c),e=this.g.set(a,b),f=this;this.w.put(a.toString(),b.Z(k),function(b){var c="ok"===b;Ac(f.g,a,e);c||(Ib("set at "+a+" failed: "+b),yc(f.g,a),b=Xc(f,a),Yc(f,b),f.ia.sa(b.path(),n));d&&d(c)});b=Xc(this,a);Zc(this,a);Yc(this,b);this.ia.sa(b.path())};
p.update=function(a,b,c){this.c("update",{path:a.toString(),value:b});var d=U(this.g.xa,a),e=k,f;for(f in b)var e=n,i=O(b[f]),d=d.B(f,i);if(e)L("update() called with empty data.  Don't do anything."),c&&c(k);else{var j=this.g.set(a,d),m=this;uc(this.w,"m",a.toString(),b,function(b){J("ok"===b||"permission_denied"===b,"merge at "+a+" failed.");b="ok"===b;Ac(m.g,a,j);c&&c(b)},h);b=Xc(this,a);Zc(this,a);Yc(this,b);this.ia.sa(b.path())}};
p.lc=function(a,b,c){this.c("setPriority",{path:a.toString(),ra:b});var d=U(this.g.V,a).Wb(b),e=this.g.set(a,d),f=this;this.w.put(a.toString()+"/.priority",b,function(b){b="ok"===b;Ac(f.g,a,e);c&&c(b)});b=Xc(this,a);Yc(this,b);this.ia.sa(b.path())};p.Rb=function(a,b){this.w.qa(a.toString(),b)};p.xb=function(a,b,c){".info"===D(a.path)?this.ac.xb(a,b,c):this.ia.xb(a,b,c)};p.ob=function(a,b,c){".info"===D(a.path)?this.ac.ob(a,b,c):this.ia.ob(a,b,c)};p.Qa=function(){this.w.Qa()};p.pb=function(){this.w.pb()};
p.c=function(){L("r:"+this.w.id+":",arguments)};function $c(a,b){var c=new X(a,b);return new P(U(a.g.xa,b),c)};function Zc(a,b){var c=G(a.Tb,b);Oa(c,function(b){ad(a,b)});ad(a,c);Na(c,function(b){ad(a,b)})}function ad(a,b){var c=b.j();if(c!==l){for(var d=-1,e=[],f=0;f<c.length;f++)if(2===c[f].status)J(d===f-1,"All SENT items should be at beginning of queue."),d=f,c[f].status=4,c[f].pc="set";else if(c[f].Vb(),c[f].I){var i=$c(a,b.path());e.push(x(c[f].I,l,n,i))}-1===d?H(b,l):c.length=d+1;for(f=0;f<e.length;f++)e[f]()}}
function bd(a,b){var c=b||a.Tb;b||cd(a,c);if(!c.e())if(c.j()!==l){var d=dd(a,c);if(0!==d.length){var e=c.path();if(2!==d[0].status&&4!==d[0].status){for(var f=0;f<d.length;f++)J(1===d[f].status,"tryToSendTransactionForNode_: items in queue should all be run."),d[f].status=2,d[f].Nc++;var i=U(a.g.V,e).hash();V(a.g.V,e,U(a.g.xa,e));var j=U(a.g.V,e).Z(k),m=zb();H(G(a.g.lb,e),m);a.w.put(e.toString(),j,function(b){a.c("transaction put response",{path:e.toString(),status:b});var i=G(a.g.lb,e),j=i.j();J(j!==
l,"tryToSendTransactionsForNode_: pendingPut should not be null.");j===m&&(H(i,l),V(a.g.V,e,U(a.g.sb,e)));if("ok"===b){b=[];for(f=0;f<d.length;f++)d[f].status=3,d[f].I&&(i=$c(a,d[f].path),b.push(x(d[f].I,l,k,i))),d[f].Vb();cd(a,c);bd(a);for(f=0;f<b.length;f++)b[f]()}else{if("datastale"===b)for(f=0;f<d.length;f++)d[f].status=4===d[f].status?5:1;else{Ib("transaction at "+e+" failed: "+b);for(f=0;f<d.length;f++)d[f].status=5,d[f].pc=b}b=Xc(a,e);Yc(a,b);a.ia.sa(b.path())}},i)}}}else c.F(function(b){bd(a,
b)})}
function Yc(a,b){var c=b.path();V(a.g.xa,c,U(a.g.V,c));var d=dd(a,b);if(0!==d.length){for(var e=U(a.g.xa,c),f=[],i=0;i<d.length;i++){var j=Ja(c,d[i].path),m=n,s;J(j!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===d[i].status)m=k,s=d[i].pc;else if(1===d[i].status)if(25<=d[i].Nc)m=k,s="maxretry";else{var t=d[i].update(e.K(j).Z());u(t)?(ya("transaction failed: Data returned ",t),e=e.wb(j,O(t))):(m=k,s="nodata")}m&&(d[i].Vb(),d[i].status=3,d[i].I&&(m=new X(a,d[i].path),j=new P(e.K(j),
m),f.push(x(d[i].I,l,n,j,s))))}d=U(a.g.V,c).i();V(a.g.xa,c,e.Wb(d));bd(a);for(i=0;i<f.length;i++)f[i]()}}function Xc(a,b){for(var c,d=a.Tb;(c=D(b))!==l&&d.j()===l;)d=G(d,c),b=Ia(b);return d}function dd(a,b){var c=[];ed(a,b,c);c.sort(function(a,b){return a.Jc-b.Jc});return c}function ed(a,b,c){var d=b.j();if(d!==l)for(var e=0;e<d.length;e++)c.push(d[e]);b.F(function(b){ed(a,b,c)})}
function cd(a,b){var c=b.j();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;H(b,0<c.length?c:l)}b.F(function(b){cd(a,b)})};function Y(){this.Ea={}}Y.yc=function(){return Y.Bc?Y.Bc:Y.Bc=new Y};Y.prototype.Qa=function(){for(var a in this.Ea)this.Ea[a].Qa()};Y.prototype.interrupt=Y.prototype.Qa;Y.prototype.pb=function(){for(var a in this.Ea)this.Ea[a].pb()};Y.prototype.resume=Y.prototype.pb;var Z={xd:function(){return Y.yc().Ea}};Z.repos=Z.xd;Z.gd=function(a){var b=N.prototype.hash;N.prototype.hash=a;return function(){N.prototype.hash=b}};Z.hijackHash=Z.gd;Z.Da=function(a){return a.Da()};Z.queryIdentifier=Z.Da;Z.jd=function(a){return a.n.w.$};Z.listens=Z.jd;Z.vd=function(a){return a.n.w.nb};Z.refConnection=Z.vd;Z.Tc=oc;Z.DataConnection=Z.Tc;oc.prototype.sendRequest=oc.prototype.Ha;oc.prototype.interrupt=oc.prototype.Qa;Z.Uc=T;Z.RealTimeConnection=Z.Uc;T.prototype.sendRequest=T.prototype.kc;
T.prototype.close=T.prototype.close;Z.Sc=ib;Z.ConnectionTarget=Z.Sc;Z.ed=function(){$b=k;Tb.Cd.Dd()};Z.forceLongPolling=Z.ed;var fd,gd=0,hd=[];fd=function(){var a=(new Date).getTime()+Mb,b=a===gd;gd=a;for(var c=Array(8),d=7;0<=d;d--)c[d]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(a%64),a=Math.floor(a/64);J(0===a);a=c.join("");if(b){for(d=11;0<=d&&63===hd[d];d--)hd[d]=0;hd[d]++}else for(d=0;12>d;d++)hd[d]=Math.floor(64*Math.random());for(d=0;12>d;d++)a+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(hd[d]);J(20===a.length,"NextPushId: Length should be 20.");return a};function X(){var a,b,c;if(arguments[0]instanceof Vc)c=arguments[0],a=arguments[1];else{z("new Firebase",1,2,arguments.length);a=arguments[0];var d="",e="",f=k;b="";if(v(a)){d=a.indexOf("//");0<=d&&(f="http:"!==a.substring(0,d),a=a.substring(d+2));var i=a.indexOf("/");-1===i&&(i=a.length);d=a.substring(0,i);a=a.substring(i+1);var i=a.indexOf("/"),j=d.split(".");3==j.length?("firebase"===j[1]?(Ib(d+" is deprecated. Please use <YOUR FIREBASE>.firebaseio.com instead"),0<i?(e=a.substring(0,i),b=Jb(a.substring(i))):
(e=a,b="/"),j[0]=e,j[1]="firebaseio",d=j.join(".")):(e=j[0],b=Jb("/"+a)),e=e.toLowerCase()):e=l}f||"undefined"!==typeof window&&(window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:"))&&Ib("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");a=new ib(d,f,e);b=new F(b);f=b.toString();if(!(d=!v(a.host)))if(!(d=0===a.host.length))if(!(d=!wa(a.Ca)))if(d=0!==f.length)f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),d=!(v(f)&&0!==f.length&&
!va.test(f));d&&g(Error(A("new Firebase",1,n)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".'));arguments[1]?arguments[1]instanceof Y?c=arguments[1]:g(Error("Expected a valid Firebase.Context for second argument to new Firebase()")):c=Y.yc();f=(a.rb?"https://":"http://")+a.host;d=c.Ea[f];d||(d=new Vc(a),c.Ea[f]=d);c=d;a=b}E.call(this,c,a)}ja(X,E);var id=X,jd=["Firebase"],$=ba;!(jd[0]in $)&&$.execScript&&$.execScript("var "+jd[0]);
for(var ld;jd.length&&(ld=jd.shift());)!jd.length&&u(id)?$[ld]=id:$=$[ld]?$[ld]:$[ld]={};Q&&(module.exports=X);X.prototype.name=function(){z("Firebase.name",0,0,arguments.length);return this.path.e()?this.n.name():this.path.R<this.path.m.length?this.path.m[this.path.m.length-1]:l};X.prototype.name=X.prototype.name;
X.prototype.H=function(a){z("Firebase.child",1,1,arguments.length);if(fa(a))a=String(a);else if(!(a instanceof F))if(D(this.path)===l){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Ca("Firebase.child",b)}else Ca("Firebase.child",a);return new X(this.n,this.path.H(a))};X.prototype.child=X.prototype.H;X.prototype.parent=function(){z("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return a===l?l:new X(this.n,a)};X.prototype.parent=X.prototype.parent;
X.prototype.toString=function(){z("Firebase.toString",0,0,arguments.length);var a;if(this.parent()===l)a=this.n.toString();else{a=this.parent().toString()+"/";var b=this.name();a+=encodeURIComponent(String(b))}return a};X.prototype.toString=X.prototype.toString;X.prototype.set=function(a,b){z("Firebase.set",1,2,arguments.length);Da("Firebase.set",this.path);xa("Firebase.set",a,n);C("Firebase.set",2,b,k);return this.n.Sb(this.path,a,l,b)};X.prototype.set=X.prototype.set;
X.prototype.update=function(a,b){z("Firebase.update",1,2,arguments.length);Da("Firebase.update",this.path);ga(a)||g(Error(A("Firebase.update",1,n)+" must be an object containing the children to replace."));xa("Firebase.update",a,n);C("Firebase.update",2,b,k);return this.n.update(this.path,a,b)};X.prototype.update=X.prototype.update;
X.prototype.Sb=function(a,b,c){z("Firebase.setWithPriority",2,3,arguments.length);Da("Firebase.setWithPriority",this.path);xa("Firebase.setWithPriority",a,n);za("Firebase.setWithPriority",2,b,n);C("Firebase.setWithPriority",3,c,k);(".length"===this.name()||".keys"===this.name())&&g("Firebase.setWithPriority failed: "+this.name()+" is a read-only object.");return this.n.Sb(this.path,a,b,c)};X.prototype.setWithPriority=X.prototype.Sb;
X.prototype.remove=function(a){z("Firebase.remove",0,1,arguments.length);Da("Firebase.remove",this.path);C("Firebase.remove",1,a,k);this.set(l,a)};X.prototype.remove=X.prototype.remove;
X.prototype.transaction=function(a,b){function c(){}z("Firebase.transaction",1,2,arguments.length);Da("Firebase.transaction",this.path);C("Firebase.transaction",1,a,n);C("Firebase.transaction",2,b,k);(".length"===this.name()||".keys"===this.name())&&g("Firebase.transaction failed: "+this.name()+" is a read-only object.");var d=this.n,e=this.path;d.c("transaction on "+e);var f=new X(d,e);f.ec("value",c);var i={path:e,update:a,I:b,Jc:zb(),Nc:0,Vb:function(){f.dc("value",c)}},j=d.g.xa,m=i.update(U(j,
e).Z());if(u(m)){ya("transaction failed: Data returned ",m);var s=U(d.g.V,e).i();V(j,e,O(m,s));d.ia.sa(e);i.status=1;e=G(d.Tb,e);j=e.j()||[];j.push(i);H(e,j);bd(d)}else i.Vb(),i.I&&(d=$c(d,e),i.I(n,d))};X.prototype.transaction=X.prototype.transaction;X.prototype.lc=function(a,b){z("Firebase.setPriority",1,2,arguments.length);Da("Firebase.setPriority",this.path);za("Firebase.setPriority",1,a,n);C("Firebase.setPriority",2,b,k);a!==l&&Ea.test(a)&&(a=Number(a));this.n.lc(this.path,a,b)};
X.prototype.setPriority=X.prototype.lc;X.prototype.push=function(a,b){z("Firebase.push",0,2,arguments.length);Da("Firebase.push",this.path);xa("Firebase.push",a,k);C("Firebase.push",2,b,k);var c=fd(),c=this.H(c);"undefined"!==typeof a&&a!==l&&c.set(a,b);return c};X.prototype.push=X.prototype.push;X.prototype.wd=function(){z("Firebase.removeOnDisconnect",0,0,arguments.length);this.n.Rb(this.path,l)};X.prototype.removeOnDisconnect=X.prototype.wd;
X.prototype.Rb=function(a){z("Firebase.setOnDisconnect",1,1,arguments.length);xa("Firebase.setOnDisconnect",a,n);this.n.Rb(this.path,a)};X.prototype.setOnDisconnect=X.prototype.Rb;X.prototype.$a=function(a,b){z("Firebase.auth",1,2,arguments.length);v(a)||g(Error(A("Firebase.auth",1,n)+"must be a valid credential (a string)."));C("Firebase.auth",2,b,k);this.n.$a(a,b)};X.prototype.auth=X.prototype.$a;X.prototype.vb=function(){this.n.vb()};X.prototype.unauth=X.prototype.vb;
X.enableLogging=function(a){a===k?"undefined"!==typeof console&&("function"===typeof console.log?Fb=x(console.log,console):"object"===typeof console.log&&(Fb=function(a){console.log(a)})):Fb=a?a:l};X.TEST_HOOKS=Z;X.Context=Y;})();